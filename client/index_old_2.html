<html>
<body>
  <div>Users:</div>
  <ul>
    <li id="john">John</li>
    <li id= 'person'>Pete</li>
  </ul>



  <script type="text/javascript">

  document.addEventListener('DOMContentLoaded',loadData);
  function handler(){
    alert('Thanks');
  }
  function handler2(){
    alert('Thanks again');
  }

  john.onclick = () => alert("hello");
  john.addEventListener("click", handler);
  john.addEventListener("click", handler2);
  person.onclick= function(){
    alert("Just playing");
  }

  function deleteTask(id){
    alert(`you are about to delete item of this id ${id}`);

  }


 async function loadData(){

    let list = document.body.firstElementChild.nextElementSibling;

    await fetch('http://localhost:4000/api/v1/admin')
     .then(data=>data.json())
     .then(data=>{
        //alert(data);
        //console.log(data);

        for(let i =0; i<= data.length - 1;i++){
          let textNode = `User Id:  ${data[i]._id}
                          Email: ${data[i].email}
                          Username: ${data[i].username}
                          <span onclick = deleteTask(${data[i]._id})><a href="#" >âœ˜</a></span>`;

          let listElement = document.createElement('li');

           listElement.innerHTML= textNode;





          //listElement.appendChild(listValue);
          list.appendChild(listElement);


      }
      console.log(data);

   })
   .catch(err=>{
    console.log(err);
   });


  }





  </script>
</body>
</html>
